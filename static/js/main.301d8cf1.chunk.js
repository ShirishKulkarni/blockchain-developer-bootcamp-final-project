(this.webpackJsonpnftpop=this.webpackJsonpnftpop||[]).push([[0],{225:function(e,t,n){},226:function(e,t,n){},243:function(e,t){},245:function(e,t){},249:function(e,t){},250:function(e,t){},277:function(e,t){},279:function(e,t){},294:function(e,t){},296:function(e,t){},311:function(e,t){},329:function(e,t){},331:function(e,t){},349:function(e,t){},350:function(e,t){},420:function(e,t){},422:function(e,t){},428:function(e,t){},440:function(e,t){},443:function(e,t){},448:function(e,t){},526:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(214),r=n.n(s),o=(n(225),n(226),n(6)),c=n.n(o),u=n(13),l=n(12),p=n(0),d=function(e){var t=e.text,n=e.red,a=void 0!==n&&n,i=e.modal,s=void 0!==i&&i,r=e.onClick,o=e.padding,c=void 0!==o&&o,u=e.alert,l=void 0!==u&&u,d=e.header,y=void 0!==d&&d,m=e.green,b=void 0!==m&&m,f=(e.auction,a?"text-red-900 bg-white":l?"text-white bg-red-600":b?"text-white bg-green-600":"text-white bg-red-600");return Object(p.jsx)("button",{className:"font-medium  text-sm lg:text-base rounded-button shadow-button cursor-pointer ".concat(f," ").concat(s?"w-full lg:text-base":"px-3 lg:px-6"," \n            ").concat(c?"mb-10":"","\n            ").concat(y?"py-1":"py-3","\n            "),onClick:r,children:t})},y=n(21),m=n(88),b=new m.a({supportedChainIds:[3,1337]}),f=function(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=(t[0],t[1],Object(y.b)()),i=n.active,s=n.account,r=n.activate;function o(){return(o=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(b);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return Object(p.jsx)("header",{className:"bg-red-700 sticky top-0 z-10 h-15",children:Object(p.jsxs)("div",{className:"container mx-auto px-4 lg:px-2 py-3 flex justify-between items-center",children:[Object(p.jsx)("span",{className:"text-2xl font-bold cursor-pointer text-white",children:Object(p.jsx)("b",{children:"Most Popular NFT"})}),i?Object(p.jsx)("b",{className:"text-white font-small font-bolder text-sm",children:s}):Object(p.jsx)(d,{text:"Wallet",onClick:function(){return o.apply(this,arguments)},header:!0,red:!0})]})})},j=n(215),x=Object(j.a)((function(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(void 0),r=Object(l.a)(s,2);return{account:n,setAccount:i,contract:r[0],setContract:r[1]}})),v=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i,s,r){var o,u,l,p,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new Array,u=new Array,e.next=4,i.eth.getAccounts();case 4:return l=e.sent,e.next=7,t.methods.getTokenMetaList().call({from:l[0]},(function(e,t){e?console.log("An error occured",e):t.forEach((function(e){console.log(e),e.uri&&o.push({id:e.tokenId,image:e.uri,isPoll:!1,isActive:!1})}))}));case 7:return e.next=9,n.methods.getAllOngoingPolls().call({from:l[0]},(function(e,t){e?console.log("An error occured",e):t.forEach((function(e){u.push({address:e})}))}));case 9:p=c.a.mark((function e(t){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u[t].address,i=new r.eth.Contract(s,n,a),e.next=4,i.methods.isVotingComplete().call((function(e,t){o.push({id:n,isPoll:!0,image:"https://news.miami.edu/_assets/images-stories/2020/09/voterpolling-hero-940x529.jpg",isActive:!t})}));case 4:case"end":return e.stop()}}),e)})),e.t0=c.a.keys(u);case 11:if((e.t1=e.t0()).done){e.next=16;break}return d=e.t1.value,e.delegateYield(p(d),"t2",14);case 14:e.next=11;break;case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e)})));return function(t,n,a,i,s,r){return e.apply(this,arguments)}}(),g=n(16),h=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.eth.getAccounts();case 3:s=e.sent,t.methods.buy(a).send({from:s[0],value:5e15},(function(e,t){e?console.log("An error occured",e):console.log(t)})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,i){return e.apply(this,arguments)}}(),O="0x0E61f1530C73cb2d326c9B0D089731FBCaE8c2fF",w="0x2E5B4B2deca61D028aC7e5359fB73c6DeeF67eF6",T=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenMetaList",outputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],internalType:"struct NationalMonumentNFT.NFTMeta[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI2",outputs:[{internalType:"string",name:"uri",type:"string"},{internalType:"address",name:"addr",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"}],k=[{inputs:[{internalType:"uint256",name:"_days",type:"uint256"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"string[]",name:"uris",type:"string[]"}],name:"createNewPoll",outputs:[{internalType:"address",name:"newContract",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllOngoingPolls",outputs:[{internalType:"address[]",name:"polls",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"id",type:"uint256"}],name:"getPollAddress",outputs:[{internalType:"address",name:"pollContractAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"nftPolls",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}],N=[{inputs:[{internalType:"uint256",name:"_days",type:"uint256"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"string[]",name:"uris",type:"string[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"_winner_addr",type:"address"},{indexed:!1,internalType:"uint256",name:"_total_votes",type:"uint256"}],name:"PollWinner",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_contestant_addr",type:"address"},{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"RegisterItemForPoll",type:"event"},{anonymous:!1,inputs:[],name:"RegistrationForPollCompleted",type:"event"},{anonymous:!1,inputs:[],name:"RegistrationForPollStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_voter",type:"address"},{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"Vote",type:"event"},{anonymous:!1,inputs:[],name:"VotingCompleted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"_voter",type:"address"},{indexed:!1,internalType:"uint256",name:"_tokenId",type:"uint256"},{indexed:!1,internalType:"string",name:"_message",type:"string"}],name:"VotingFailed",type:"event"},{anonymous:!1,inputs:[],name:"VotingStarted",type:"event"},{anonymous:!1,inputs:[{components:[{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"voteCount",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],indexed:!1,internalType:"struct NFTPOLL.Item[]",name:"winners",type:"tuple[]"}],name:"Winners",type:"event"},{inputs:[],name:"endPolling",outputs:[{components:[{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"voteCount",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],internalType:"struct NFTPOLL.Item[]",name:"",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllItemsInPoll",outputs:[{components:[{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"voteCount",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],internalType:"struct NFTPOLL.Item[]",name:"items",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPollResults",outputs:[{components:[{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"voteCount",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],internalType:"struct NFTPOLL.Item[]",name:"",type:"tuple[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isRegistrationComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isVotingComplete",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"isVotingStarted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pollWinners",outputs:[{components:[{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"voteCount",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],internalType:"struct NFTPOLL.Item[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"nft_addr",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"string",name:"_uri",type:"string"}],name:"registerItemForPoll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"tokensInPoll",outputs:[{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"voteCount",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_nft_addr",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"vote",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"votedAddresses",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"votingEndBlockTimeStamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"winners",outputs:[{internalType:"address",name:"nftAddr",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"voteCount",type:"uint256"},{internalType:"string",name:"uri",type:"string"}],stateMutability:"view",type:"function"}],C=n(23),M=n.n(C),A=function(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(void 0),r=Object(l.a)(s,2),o=(r[0],r[1]),m=Object(g.h)().id,b=Object(g.g)(),f=(x.useContainer().contract,Object(y.b)()),j=f.library,w=f.active,k=f.account;Object(a.useEffect)((function(){w&&Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new M.a(j),o(t),n=new j.eth.Contract(T,O,k),v(n,null,k,t,N,j).then((function(e){var t,n=null===(t=e.filter((function(e){return e.id===m})))||void 0===t?void 0:t[0];n||b.push("/listings"),i(n)}));case 4:case"end":return e.stop()}}),e)})))()}),[w]);return Object(p.jsx)(p.Fragment,{children:n?Object(p.jsxs)("div",{className:"container mx-auto px-4 lg:px-2 pb-20",children:[Object(p.jsx)("div",{className:"pt-20 pb-10",children:Object(p.jsx)("h1",{className:"text-gray-900 text-3xl font-medium"})}),Object(p.jsxs)("div",{className:"grid lg:grid-cols-3 gap-12 relative",children:[Object(p.jsx)("div",{className:"order-2 lg:order-none lg:col-span-2",children:Object(p.jsx)("img",{className:"rounded-xl bg-gray-100",src:n.image})}),Object(p.jsxs)("div",{className:"order-1",children:[Object(p.jsx)("div",{className:"text-center",children:Object(p.jsxs)("p",{className:"mt-4 mb-8 text-xl text-red-600 font-medium",children:[n.price," ETH"]})}),Object(p.jsx)("div",{className:"sticky top-32 p-6 rounded-xl border-2 w-full",children:Object(p.jsx)(d,{modal:!0,onClick:function(){var e=new M.a(j),t=new j.eth.Contract(T,O,k);h(t,e,n.id,n.price)},text:"Purchase"})})]})]})]}):w?Object(p.jsx)("p",{className:"pt-20 text-xl text-center",children:"Loading"}):Object(p.jsx)("p",{className:"pt-20 text-xl text-center",children:"Please connect ZilPay"})})},I=n(44),S=n(18),P=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i,s,r,o){var u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.eth.getAccounts();case 2:return u=e.sent,e.next=5,t.methods.safeMint(u[0],n).send({from:u[0]},(function(e,t){if(e)return console.log("An error occured",e),void S.b.error("Create Listing Failed!");console.log(t),S.b.success("Create Listing Submitted!")}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,i,s,r,o){return e.apply(this,arguments)}}(),L=function(e){var t=e.name,n=e.unit,a=void 0===n?"":n,i=e.value,s=void 0===i?"":i,r=e.setValue,o=e.type,c=void 0===o?"text":o,u=e.placeHolder,l=e.disabled;return Object(p.jsxs)("div",{className:"",children:[Object(p.jsxs)("div",{className:"flex justify-between items-center py-2 text-xs tracking-wide uppercase",children:[Object(p.jsx)("h4",{className:"font-semibold text-gray-500",children:t}),Object(p.jsx)("p",{className:"font-medium text-gray-400",children:a})]}),Object(p.jsx)("input",{className:"w-full h-10 mb-6 border-2 border-gray-300 focus:border-gray-900 rounded-button outline-none text-gray-900 lg:text-lg px-4 py-3",placeholder:u||t,type:"text",inputMode:"number"===c?"decimal":"text",min:"number"===c?1:void 0,value:s,onChange:function(e){return r(e.target.value)},disabled:!!l})]})},F=function(e){var t=e.title,n=e.children,i=e.setVisible,s=e.visible,r=e.buttonText,o=e.onClick;return Object(a.useEffect)((function(){document.onkeydown=function(e){"Enter"===e.key&&(e.preventDefault(),o())}}),[]),Object(p.jsx)("div",{className:"w-screen h-screen bg-black bg-opacity-25 fixed top-0 left-0 z-20 transition-all",style:s?{opacity:1,visibility:"visible",transform:"translateY(0)"}:{opacity:0,visibility:"hidden",transform:"translateY(30px)"},onClick:function(){return i(!1)},children:Object(p.jsx)("div",{className:"w-full h-full flex justify-center items-center px-4 lg:px-2 py-2",children:Object(p.jsxs)("div",{className:"w-full lg:w-1/3 bg-white shadow-xl rounded-2xl max-h-full flex flex-col",onClick:function(e){return e.stopPropagation()},children:[Object(p.jsxs)("div",{className:"flex justify-between items-center p-8",children:[Object(p.jsx)("p",{className:"text-xl font-bold text-gray-900",children:t}),Object(p.jsx)("button",{className:"p-1 rounded hover:bg-gray-100 transition-colors -mr-1",onClick:function(){return i(!1)},children:Object(p.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(p.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Object(p.jsx)("div",{className:"w-full px-8 pt-0 overflow-y-scroll flex-grow",children:n}),Object(p.jsx)("div",{className:"p-8",children:Object(p.jsx)(d,{modal:!0,text:r,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){o(),i(!1)}))})})]})})})},_=function(e){var t=e.showCreateListing,n=e.setShowCreateListing,i=Object(a.useState)(void 0),s=Object(l.a)(i,2),r=s[0],o=s[1],c=Object(a.useState)("1"),u=Object(l.a)(c,2),d=u[0],m=u[1],b=Object(a.useState)("0"),f=Object(l.a)(b,2),j=f[0],x=f[1],v=Object(a.useState)("0"),g=Object(l.a)(v,2),h=g[0],w=g[1],k=Object(y.b)(),N=k.library,C=(k.active,k.account);return Object(a.useEffect)((function(){o(void 0),m("1"),x("0"),w("0")}),[t]),Object(p.jsx)(F,{title:"Post your Creation",visible:t,setVisible:n,buttonText:"Post!",onClick:function(){if(r){var e=new M.a(N),t=new N.eth.Contract(T,O);P(t,r,d,j,h,C,e)}},children:Object(p.jsx)(L,{name:"Image URL",value:r,type:"text",setValue:o})})},E=function(e){e.name,e.price,e.rooms,e.bathrooms;var t=e.image,n=(e.rented,e.onClick);e.royalty_type;return Object(p.jsx)("div",{className:"w-full cursor-pointer",onClick:n,children:Object(p.jsx)("div",{className:"w-full h-64 mb-2 bg-red-100 flex justify-end items-start p-2",style:{backgroundImage:"url(".concat(t,")"),backgroundSize:"cover"}})})},V=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.eth.getAccounts();case 3:return i=e.sent,e.next=6,t.methods.burn(a).send({from:i[0]},(function(e,t){e?console.log("An error occured",e):console.log(t)}));case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i,s){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(parseInt(i||"")*Math.pow(10,12)).toString();case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,i,s){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.eth.getAccounts();case 3:s=e.sent,t.methods.approve(i,a).send({from:s[0]},(function(e,t){e?console.log("An error occured",e):console.log(t)})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,i){return e.apply(this,arguments)}}(),D=function(e){var t=e.showManageListing,n=e.setShowManageListing,i=e.modalListing,s=i.id,r=(i.accumulated_rent,Object(a.useState)(void 0)),o=Object(l.a)(r,2),c=o[0],u=o[1],m=Object(a.useState)(void 0),b=Object(l.a)(m,2),f=b[0],j=b[1],x=Object(a.useState)(void 0),v=Object(l.a)(x,2),g=v[0],h=v[1],w=Object(a.useState)(void 0),k=Object(l.a)(w,2),N=k[0],C=k[1],A=Object(a.useState)(void 0),I=Object(l.a)(A,2),S=I[0],P=I[1],_=Object(y.b)(),E=_.library,D=(_.active,_.account);Object(a.useEffect)((function(){u(i.price),j(i.image);var e=new M.a(E);h(e);var t=new E.eth.Contract(T,O,D);C(t)}),[t]);var W=function(){V(N,g,s),n(!1)};return Object(p.jsxs)(F,{title:"Manage",visible:t,setVisible:n,buttonText:"Update Listing",onClick:function(){s&&c&&f&&B(N,g,s,c,f)},children:[Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{className:"text-sm font-semibold text-gray-500 tracking-wide uppercase py-4",children:"Delete Listing"}),Object(p.jsx)(d,{text:"Delete Listing",onClick:W,alert:!0,padding:!0,modal:!0})]}),Object(p.jsx)(L,{name:"Price",unit:"ETH",value:c,type:"number",setValue:u,disabled:!0}),Object(p.jsx)(L,{name:"Image URL",value:f,type:"text",setValue:j,disabled:!0}),Object(p.jsxs)("div",{className:"flex grid md:grid-rows-1",children:[Object(p.jsx)("h4",{className:"text-sm font-semibold text-gray-500 tracking-wide uppercase py-4",children:"Auction"}),Object(p.jsxs)("div",{className:"flex grid md:grid-cols-3 gap-7",children:[Object(p.jsx)(d,{text:"Setup Auction",onClick:W,auction:!0,padding:!0,modal:!0}),Object(p.jsx)(d,{text:"Start Auction",onClick:W,auction:!0,padding:!0,modal:!0}),Object(p.jsx)(d,{text:"End Auction",onClick:W,auction:!0,padding:!0,modal:!0})]})]}),Object(p.jsx)(L,{name:"Buyer Address",value:S,type:"text",setValue:P}),Object(p.jsx)(d,{text:"Approve Buyer",onClick:function(){R(N,g,s,S),n(!1)},green:!0,padding:!0,modal:!0})]})},W=function(e){var t=e.image,n=e.onClick,a=e.isActive;return Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"w-full rounded-2xl cursor-pointer",onClick:n,children:Object(p.jsxs)("div",{className:"relative py-3 w-full sm:max-w-xl sm:mx-auto h-64",children:[Object(p.jsx)("div",{className:"absolute "}),Object(p.jsxs)("div",{className:"relative h-64 w-full bg-white shadow-lg ",children:[Object(p.jsxs)("div",{className:"px-2 py-1 bg-gray-200 text-gray-600 rounded uppercase text-xs tracking-wide font-semibold",children:[a?"Voting In Progress!":"Voting Complete!",Object(p.jsx)("span",{className:"text-gray-900 font-light"})]}),Object(p.jsx)("img",{style:{height:"100%",width:"100%",objectFit:"cover"},className:"bg-gray-100",src:t})]})]})})})},U=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i,s,r){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.eth.getAccounts();case 3:o=e.sent,t.methods.createNewPoll(15,i,s,r).send({from:o[0]}).on("transactionHash",(function(e){S.b.success("Request Submitted Successfully!")})).on("error",S.b.error).then((function(e){S.b.success("Polling Started Successfully!"),window.location.href="/listings"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),S.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,i,s,r){return e.apply(this,arguments)}}(),H=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(!1),o=Object(l.a)(r,2),c=o[0],u=o[1],m=Object(a.useState)(void 0),b=Object(l.a)(m,2),f=b[0],j=b[1],h=Object(a.useState)(void 0),C=Object(l.a)(h,2),A=C[0],S=C[1],P=Object(g.g)(),L=(x.useContainer().contract,Object(y.b)()),F=L.library,V=L.active,B=L.account,R=null===A||void 0===A?void 0:A.filter((function(e){return!e.isPoll})),H=null===A||void 0===A?void 0:A.filter((function(e){return e.isPoll}));return Object(a.useEffect)((function(){if(V){var e=new M.a(F),t=new F.eth.Contract(T,O,B),n=new F.eth.Contract(k,w,B);v(t,n,B,e,N,F).then((function(e){S(e),console.log(e)})),console.log("set"),console.log("set")}}),[V,B]),Object(p.jsxs)("div",{className:"container mx-auto px-4 lg:px-2 pb-10",children:[Object(p.jsx)("div",{className:"pt-10 pb-5 flex justify-between items-center"}),H?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"pt-16 pb-5 flex justify-between items-center",children:Object(p.jsx)("h1",{className:"text-red-600 text-2xl font-medium",children:"Polled Listing"})}),H.length>0?Object(p.jsx)("div",{className:"grid md:grid-cols-5 gap-8 ",children:H.map((function(e,t){return Object(p.jsx)(W,Object(I.a)(Object(I.a)({},e),{},{onClick:function(){P.push("/poll/".concat(e.id,"/").concat(e.isActive))}}))}))}):Object(p.jsx)("p",{className:"text-xl text-center text-red-600",children:"No listings"}),Object(p.jsxs)("div",{className:"pt-16 pb-5 flex justify-between items-center",children:[Object(p.jsx)("h1",{className:"text-red-600 text-2xl font-medium",children:"Your Tokens"}),Object(p.jsxs)("div",{className:"flex items-center space-between",children:[Object(p.jsx)(d,{text:"Create a token",onClick:function(){return s(!0)}}),Object(p.jsx)("div",{className:"px-5"}),Object(p.jsx)(d,{text:"Start Poll",onClick:function(){if(V){var e=new M.a(F),t=new F.eth.Contract(k,w,B),n=A.filter((function(e){return!e.isPoll})).map((function(e){return e.id})),a=A.filter((function(e){return!e.isPoll})).map((function(){return O})),i=A.filter((function(e){return!e.isPoll})).map((function(e){return e.image}));U(t,B,e,n,a,i)}}})]})]}),R.length>0?Object(p.jsx)("div",{className:"grid md:grid-cols-5 gap-6",children:R.map((function(e,t){return Object(p.jsx)(E,Object(I.a)(Object(I.a)({},e),{},{onClick:function(){j(e),u(!1)}}))}))}):Object(p.jsx)("p",{className:"text-xl text-center text-red-600",children:"No listings"})]}):Object(p.jsx)("p",{className:"text-xl text-center text-red-600",children:"Connect wallet to proceed"}),Object(p.jsx)(_,{showCreateListing:i,setShowCreateListing:s}),f&&Object(p.jsx)(D,{modalListing:f,showManageListing:c,setShowManageListing:u})]})},z=n(86),Y=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i,s){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.eth.getAccounts();case 2:return r=e.sent,e.next=5,t.methods.vote(i,s).send({from:r[0]},(function(e,t){e?S.b.error(e.message):S.b.success(t)}));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a,i,s){return e.apply(this,arguments)}}(),q=function(e){var t=e.image,n=e.id,i=e.tokenAddress,s=e.contractAddress,r=e.voteCount,o=e.isActive,c=Object(a.useState)(""),u=Object(l.a)(c,2),m=(u[0],u[1],Object(a.useState)("")),b=Object(l.a)(m,2),f=(b[0],b[1],Object(y.b)()),j=f.library,x=f.active,v=f.account;return Object(p.jsxs)("div",{className:"container bg-gray-100 mx-auto px-4 lg:px-2 pb-20",children:[Object(p.jsx)("div",{className:"pt-5 pb-10"}),Object(p.jsxs)("div",{className:"grid lg:grid-cols-3 gap-12 relative",children:[Object(p.jsx)("div",{className:"order-2 lg:order-none lg:col-span-2",children:Object(p.jsx)("img",{className:"rounded-xl bg-gray-100",src:t})}),Object(p.jsx)("div",{className:"order-1",children:Object(p.jsx)("div",{className:"top-32 p-6  w-full",children:i&&!o?Object(p.jsx)(d,{modal:!0,onClick:function(){if(x){var e=new M.a(j),t=new j.eth.Contract(N,s,v);Y(t,v,e,i,n)}},text:"Vote!"}):Object(p.jsxs)("h1",{className:"text-gray-900 text-3xl font-medium",children:["Votes : ",r]})})})]})]})},J=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a){var i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Array,e.next=3,a.eth.getAccounts();case 3:return s=e.sent,e.next=6,t.methods.getAllItemsInPoll().call({from:s[0]},(function(e,t){e?console.log("An error occured",e):t.forEach((function(e){i.push({id:e.tokenId,image:e.uri,tokenAddress:e.nftAddr})}))}));case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Z=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.eth.getAccounts();case 3:s=e.sent,t.methods.endPolling().send({from:s[0]}).on("transactionHash",(function(e){S.b.success("Request Submitted Successfully!")})).on("error",S.b.error).then((function(e){S.b.success("Polling Completed Successfully!");var t=[];e.events.Winners.returnValues.winners.forEach((function(e){t.push({id:e.tokenId,image:e.uri,voteCount:e.voteCount})})),i(t)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),S.b.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,a,i){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(c.a.mark((function e(t,n,a,i){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.eth.getAccounts();case 3:return s=e.sent,e.next=6,t.methods.pollWinners().call({from:s[0]}).then((function(e){var t=[];e.forEach((function(e){t.push({id:e.tokenId,image:e.uri,voteCount:e.voteCount})})),i(t)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),S.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,a,i){return e.apply(this,arguments)}}(),K=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1],Object(a.useState)(!1)),i=Object(l.a)(n,2),s=(i[0],i[1],Object(a.useState)(void 0)),r=Object(l.a)(s,2),o=(r[0],r[1],Object(a.useState)(void 0)),m=Object(l.a)(o,2),b=m[0],f=m[1],j=Object(a.useState)(0),x=Object(l.a)(j,2),v=(x[0],x[1],Object(y.b)()),h=v.library,O=v.active,w=v.account,T=Object(g.h)(),k=T.id,C=T.isActive;Object(a.useEffect)((function(){O&&Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new M.a(h),n=new h.eth.Contract(N,k,w),"true"===C?J(n,w,t).then((function(e){return f(e)})):G(n,w,t,A);case 3:case"end":return e.stop()}}),e)})))()}),[O]);var A=function(e){f(e)};return Object(p.jsx)("div",{className:"container mx-auto px-4 lg:px-2 pb-10",children:b&&b.length>0?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"pt-10 pb-5 flex justify-between items-center",children:Object(p.jsx)("h1",{className:"text-gray-900 text-2xl font-medium",children:"Poll"})}),Object(p.jsx)("div",{className:"grid md:grid-cols-1 gap-10",children:b.map((function(e,t){return Object(p.jsx)(q,Object(I.a)(Object(I.a)({},e),{},{contractAddress:k}))}))}),"true"==C?Object(p.jsx)("div",{className:"order-1",children:Object(p.jsx)("div",{className:"top-32 p-6 w-full",children:Object(p.jsx)(d,{modal:!0,onClick:function(){if(O){var e=new M.a(h),t=new h.eth.Contract(N,k,w);Z(t,w,e,A)}},text:"End Polling!"})})}):Object(p.jsx)("div",{})]}):Object(p.jsx)("p",{className:"text-xl text-center",children:"No listings"})})},Q=function(){x.useContainer().setContract;var e=Object(y.b)(),t=(e.library,e.active,e.account,e.activate);return Object(a.useEffect)((function(){window.ethereum&&t(new m.a({supportedChainIds:[3]}))}),[]),Object(p.jsxs)("div",{className:"rentonzilliqa",children:[Object(p.jsx)(f,{}),Object(p.jsxs)("div",{children:[Object(p.jsx)(z.a,{children:Object(p.jsx)("main",{children:Object(p.jsxs)(g.d,{children:[Object(p.jsx)(g.b,{path:"/",exact:!0,children:Object(p.jsx)(g.a,{to:"/listings"})}),Object(p.jsx)(g.b,{path:"/listings",children:Object(p.jsx)(H,{})}),Object(p.jsx)(g.b,{path:"/listing/:id",children:Object(p.jsx)(A,{})}),Object(p.jsx)(g.b,{path:"/poll/:id/:isActive",children:Object(p.jsx)(K,{})}),Object(p.jsx)(g.a,{to:"/listings"})]})})}),Object(p.jsx)(S.a,{toastOptions:{success:{duration:6e3},error:{duration:8e3},loading:{duration:13e4}}})]})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,530)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))};r.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(y.a,{getLibrary:function(e){return new M.a(e)},children:Object(p.jsx)(x.Provider,{children:Object(p.jsx)(Q,{})})})}),document.getElementById("root")),X()}},[[526,1,2]]]);
//# sourceMappingURL=main.301d8cf1.chunk.js.map